<form class="row" [formGroup]="dynamicForm">
  <ng-container *ngFor="let control of form.formControls">
    <div *ngIf="['text','date','password','email'].includes(control.type)" [class]="control.class">
      <label class="form-label" for="">{{control.label}}</label>
      <input class="form-control" type="{{control.type}}" formControlName="{{control.name}}"
        placeholder="{{control.palceholder}}">
      <small class="text-danger"
        *ngIf="dynamicForm.get(control.name)?.invalid && (dynamicForm.get(control.name)?.touched || isSubmitted) ">{{getValidations(control)}}</small>
    </div>

    <div *ngIf="control.type == 'select'">
      <select formControlName="{{control.name}}" class="form-select" aria-label="Default select example">
        <option value="" selected>select</option>
        <ng-container *ngFor="let opt of control.options">
          <option [value]="opt.value"> {{opt.value}}</option>
        </ng-container>
      </select>
      <small class="text-danger"
        *ngIf="dynamicForm.get(control.name)?.invalid && (dynamicForm.get(control.name)?.touched || isSubmitted)">{{getValidations(control)}}</small>
    </div>

    <div *ngIf="control.type == 'radio'">
      <ng-container *ngFor="let row of control.radioOptions">
        <div class="form-check">
          <input type="radio" formControlName="{{control.name}}" [value]="row" class="form-check-input">
          <label for="control.name" class="form-check-label">{{row}}</label>
        </div>

      </ng-container>
      <small class="text-danger"
        *ngIf="dynamicForm.get(control.name)?.invalid && (dynamicForm.get(control.name)?.touched || isSubmitted)">{{getValidations(control)}}</small>
    </div>

  </ng-container>
</form>
<br>
<button type="button" class="btn btn-success mt-3" *ngIf="!editFlag" (click)="onSubmit()">
  Save
</button>

<button type="button" class="btn btn-primary mt-3" *ngIf="editFlag" (click)="updateRecord()">
  Update
</button>

<button type="button" class="btn btn-secondary mt-3 ms-2" *ngIf="editFlag" (click)="resetForm()">
  Cancel
</button>

<br>
<table *ngIf="submitForm.length" class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>

    @for(formdata of submitForm;track formdata){
    <!-- *ngFor="let formdata of submitForm;" -->
    <tr>
      <td>{{ formdata.firstName }}</td>
      <td>{{ formdata.lastName }}</td>
      <td>{{ formdata.email }}</td>
      <td>
        <button class="btn btn-sm btn-primary me-2" (click)="editUser(formdata)">
          Edit
        </button>
        <button class="btn btn-sm btn-danger" (click)="deleteUser(formdata)">
          Delete
        </button>
      </td>
    </tr>
    }

  </tbody>
</table>
